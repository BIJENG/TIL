# 흡연 여부 건강 데이터 분석 프로젝트

## 1. 프로젝트 소개
최근 여러 기관에서는 흡연이 개인 건강에 미치는 영향을 파악하고, 예방 중심 건강관리 정책 수립을 위해 데이터 분석을 강화하고 있습니다.  
본 프로젝트에서는 건강검진 데이터를 활용하여 흡연 여부(label = 0: 비흡연, 1: 흡연)와 주요 건강 지표(BMI, 혈압, 혈당, 콜레스테롤) 간의 관계를 분석합니다.

---

## 2. 데이터 불러오기 및 기본 설정

### 2.1 라이브러리 불러오기
```python
import pandas as pd
import numpy as np
import seaborn as sns
from IPython.display import display
import matplotlib.pyplot as plt
import matplotlib as mpl
import matplotlib.font_manager as fm

폰트 설정
# 나눔폰트 설치
!apt-get update -qq
!apt-get install -qq fonts-nanum*

fe = fm.FontEntry(
    fname="/usr/share/fonts/truetype/nanum/NanumGothic.ttf",
    name="NanumGothic"
)
fm.fontManager.ttflist.insert(0, fe)

# matplotlib 전역 설정
plt.rcParams.update({"font.size": 10, "font.family": "NanumGothic"})
mpl.rcParams["axes.unicode_minus"] = False

데이터 로딩
health_data = pd.read_csv("/content/drive/MyDrive/팀프로젝트/smoking_health_data.csv")
print("데이터 크기:", health_data.shape)
display(health_data.head())
display(health_data.info())

3. 데이터 전처리
# 혈압: 중앙값, 시력: 최빈값, 중성지방: 나이대별 그룹 평균, 공복 혈당: 평균
health_data["혈압"] = health_data["혈압"].fillna(health_data["혈압"].median())
health_data["시력"] = health_data["시력"].fillna(health_data["시력"].mode()[0])
health_data["중성 지방"] = health_data["중성 지방"].fillna(
    health_data.groupby("Age_Category")["중성 지방"].transform("mean")
)
health_data["공복 혈당"] = health_data["공복 혈당"].fillna(health_data["공복 혈당"].mean())

3.2 BMI, 나이대 범주화
def classify_bmi(bmi):
    if bmi < 18.5:
        return "저체중"
    elif bmi < 25:
        return "정상"
    elif bmi < 30:
        return "과체중"
    else:
        return "비만"

health_data["BMI_Category"] = health_data["BMI"].apply(classify_bmi)

def classify_age(age):
    if age < 30:
        return "30대 이하"
    elif age < 50:
        return "30~50대"
    elif age < 70:
        return "50~70대"
    else:
        return "70대 이상"

health_data["Age_Category"] = health_data["나이"].apply(classify_age)

4. 데이터 시각화
fig, axes = plt.subplots(2, 2, figsize=(14, 10))
sns.boxplot(x="label", y="혈압", data=health_data, ax=axes[0,0], palette=["skyblue","salmon"])
sns.boxplot(x="label", y="BMI", data=health_data, ax=axes[0,1], palette=["skyblue","salmon"])
sns.boxplot(x="label", y="공복 혈당", data=health_data, ax=axes[1,0], palette=["skyblue","salmon"])
sns.boxplot(x="label", y="콜레스테롤", data=health_data, ax=axes[1,1], palette=["skyblue","salmon"])
plt.tight_layout()
plt.show()

4.2 BMI(체중) 및 나이대별 그룹 비교
# 예: BMI_Category와 Age_Category 기준 그룹 비교
grouped = health_data.groupby(["label","BMI_Category","Age_Category"])
agg_stats = grouped[["혈압","BMI","공복 혈당","콜레스테롤"]].mean().reset_index()
display(agg_stats)

5. 상관관계 분석
sns.heatmap(health_data[["BMI","혈압","공복 혈당","콜레스테롤"]].corr(), annot=True, cmap="coolwarm")
plt.title("주요 변수 상관관계")
plt.show()

spearman_corr = health_data[["BMI","혈압","공복 혈당","콜레스테롤"]].corr(method="spearman")
display(spearman_corr)

6. 학습 내용 정리
6.1 Pandas

read_csv, read_excel : 데이터 불러오기

fillna() : 결측치 처리

groupby() + transform() : 그룹별 계산

apply() : 조건별 컬럼 생성

6.2 Seaborn & Matplotlib

histplot() : 히스토그램 + 밀도

boxplot() : 범주별 데이터 분포 비교

violinplot() : 데이터 분포와 밀집도 시각화

subplot : 여러 그래프를 한 화면에

6.3 데이터 분석 접근

단일 변수 분포 확인 → 히스토그램, 박스플롯

흡연 vs 비흡연 비교 → 그룹별 박스플롯

BMI, 나이대 그룹화 후 세부 분석

변수 간 상관관계 확인 → heatmap, Spearman 상관계수

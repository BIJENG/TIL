# 🚀 FastAPI 핵심 개념 및 초기 세팅 총정리 (TIL)

## 1. API와 인공지능 모델 서빙

- **모델 서빙(Model Serving):** 학습된 AI 모델을 소프트웨어 서비스와 결합하여 실제 웹이나 앱 등 서비스 환경에서 사용할 수 있게 배포하는 과정입니다.
- **API(Application Programming Interface):** 손님(사용자)과 요리사(AI 모델/서버) 사이에서 주문을 받고 완성된 요리(데이터)를 전달하는 **'레스토랑 점원'** 역할을 수행합니다.
- 통신 시에는 주로 가볍고 읽기 쉬운 **JSON(JavaScript Object Notation)** 포맷으로 데이터를 주고받습니다.

## 2. 왜 FastAPI인가?

- 파이썬 3.6 이상의 표준 **타입 힌트(Type Hint)**를 기반으로 설계되어, 코드 작성 시 에러를 줄이고 데이터 검증을 자동으로 해줍니다.
- 비동기 처리를 지원하여 NodeJS나 Go 언어와 대등할 정도로 **매우 빠른 처리 속도**를 자랑합니다.
- 서버를 실행하면 `/docs` 경로에서 **자동 생성되는 대화형 API 문서(Swagger UI)**를 제공하여, 개발과 동시에 테스트가 가능합니다.

## 3. 개발 환경 세팅 (Windows & VS Code)

- **가상환경 활성화:** `.\.venv\Scripts\Activate.ps1` (터미널 앞에 `(.venv)`가 뜨는지 반드시 확인)
- **라이브러리 설치:** `pip install "fastapi[all]"`
  - FastAPI 본체와 서버 실행을 담당하는 비동기 서버 도구인 Uvicorn 등을 한 번에 설치합니다.
- **VS Code 자동완성 트러블슈팅:** 1. 인터프리터(`Ctrl+Shift+P` -> `Python: Select Interpreter`)를 `('.venv': venv)`로 정확히 지정합니다. 2. IntelliCode(AI 추천) 할당량 초과 시, 설정(`Ctrl+,`)에서 `Language Server`를 **Pylance**로 변경하고 창을 다시 로드(`Reload Window`)하여 기본 자동완성을 복구합니다.

## 4. HTTP 통신의 핵심: 요청(Request)의 구조

서버와 대화할 때는 목적과 형식을 명확히 해야 합니다.

- **URL (주소):** 데이터가 도착할 목적지 (예: `localhost:8000/users`)
- **Method (방식):**
  - `GET`: 데이터 조회(Read). 요청 데이터가 URL에 노출됩니다.
  - `POST`: 데이터 생성(Create). SCAN Eat 프로젝트에서 음식 사진을 업로드할 때처럼 크고 중요한 데이터를 숨겨 보낼 때 사용합니다.
- **Header (헤더):** 보내는 데이터의 형식(`Content-Type`) 등을 서버에 미리 알려주는 택배 송장.
- **Body (바디):** 실제 전달되는 핵심 데이터(사진, 긴 텍스트 등). GET 방식은 통상적으로 바디가 없습니다.

## 5. 기본 코드 구조 및 경로 매개변수 (Path Parameter)

[참고 코드 - main.py]
from fastapi import FastAPI

app = FastAPI()

# 전역 데이터

users = [
{"id": 1, "name": "alex"},
{"id": 2, "name": "tom"}
]

# 1. 기본 라우터 (GET 방식)

@app.get("/")
def read_root(): # 파이썬 딕셔너리를 반환하면 FastAPI가 알아서 JSON 포맷으로 변환해 줍니다.
return {"Hello": "World"}

# 2. 경로 매개변수(Path Parameter) 활용

# 주소창의 {user_id} 값이 함수의 매개변수로 직접 전달됩니다.

@app.get("/users/{user_id}")
def get_user_handler(user_id: int): # user_id: int 처럼 Type Hint를 명시하면 자동완성과 에러 방지에 탁월합니다.
return users[user_id - 1]

## 6. 서버 실행 및 직접 테스트해보기

- **실행 명령어:** `uvicorn main:app --reload`
  - `main`: 파이썬 파일명 (`main.py`)
  - `app`: 코드 내에서 생성한 FastAPI 객체 이름
  - `--reload`: 코드를 수정하고 저장할 때마다 서버를 자동으로 재시작해주는 개발용 옵션입니다.
- **로컬호스트(Localhost):** 127.0.0.1은 내 컴퓨터 자신을 의미하며, 보통 8000번 포트를 사용합니다.
- **Swagger UI 연동:** 브라우저에서 `http://127.0.0.1:8000/docs` 접속 후, **Try it out** 버튼을 눌러 API 통신이 정상적으로 이루어지는지 즉시 검증할 수 있습니다.

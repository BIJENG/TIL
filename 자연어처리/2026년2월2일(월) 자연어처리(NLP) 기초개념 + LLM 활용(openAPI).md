# 📘 AI & 데이터 분석 학습 노트: NLP 기초부터 LLM 활용까지

> **주제:** 뉴스 데이터 분석 파이프라인 구축 및 핵심 AI 개념 정리

---

## 1. LLM의 두 가지 대화 방식: Completion vs Chat

과거의 AI와 현재의 AI가 소통하는 방식의 결정적인 차이점입니다.

### 🔹 Text Completion (텍스트 완성)
* **개념:** 소설 이어 쓰기 방식. 입력된 텍스트(Prompt)의 뒤에 올 내용을 확률적으로 예측하여 문장을 완성함.
* **구조:** 역할(Role)의 구분이 없음. 하나의 긴 텍스트 덩어리로 처리.
* **특징:** 통제가 어렵고 보안에 취약하여 최신 모델에서는 잘 사용하지 않음.
* **예시:** > 입력: "배가 아플 때는" -> 출력: "병원에 가야 합니다."

### 🔹 Chat Completion (채팅 완성) - **[현재 표준]**
* **개념:** 역할극(Role-playing) 방식. 명확히 정의된 화자(Speaker)들이 대화를 주고받는 구조.
* **구조:** 3가지 역할로 구분됨.
    1. **System:** AI의 자아, 규칙, 페르소나 설정 (예: "너는 15년 차 투자 전문가야")
    2. **User:** 사용자의 질문이나 분석할 데이터 (예: "삼성전자 뉴스 분석해줘")
    3. **Assistant:** AI의 답변
* **장점:** 지시사항(System)과 데이터(User)가 분리되어 있어 제어가 쉽고, 문맥 유지(Context)에 유리함.

---

## 2. Word2Vec: 단어를 숫자로 바꾸는 마법

컴퓨터는 '사과'라는 글자를 모릅니다. 단어를 **벡터(Vector, 숫자의 나열)**로 바꾸어 이해시키는 기술입니다.

### 🔹 핵심 개념
* **"비슷한 문맥에서 쓰이는 단어는 비슷한 의미를 가진다"**는 분포 가설에 기반함.
* 단어들을 다차원 공간상의 **좌표(Coordinate)**로 변환함.

### 🔹 벡터 연산 예시 (Analogy)
Word2Vec의 가장 유명한 수식입니다. 단어의 의미를 더하고 뺄 수 있습니다.

> **King(왕) - Man(남자) + Woman(여자) = Queen(여왕)**

* **설명:** '왕'이라는 개념에서 '남자'라는 속성을 빼고, '여자'라는 속성을 더했더니, 공간상에서 '여왕'의 위치와 가장 가까워짐.
* **헬스케어 예시:**
    * `의사 - 병원 + 학교 = 선생님`
    * `타이레놀 - 두통 + 복통 = (복통약 이름)`

---

## 3. NER vs RAG: 정보 처리의 흐름 (핵심 통찰)

데이터를 필터링하고 활용하는 단계의 차이를 이해하는 것이 중요합니다.

| 구분 | NER (Named Entity Recognition) | RAG (Retrieval-Augmented Generation) |
| :--- | :--- | :--- |
| **핵심** | **사후 필터링 (Extraction)** | **사전 검색 & 지식 주입 (Search & Inject)** |
| **방식** | 이미 수집된 텍스트 안에서 내가 정한 규칙(사전)에 맞는 단어만 골라냄. | 질문에 답하기 위해 외부 도서관(Vector DB)에서 관련 문서를 먼저 찾아옴. |
| **순서** | 수집 → **필터링(NER)** | 질문 → **검색(RAG)** → 생성 |
| **비유** | 샐러드 볼에서 방울토마토만 골라내기 | 요리하기 전에 신선한 재료를 마트에서 사 오기 |

* **💡 Insight:** NER은 주어진 데이터 내에서의 **'정리'**라면, RAG는 AI의 지식을 확장하는 **'두뇌 보조 장치'**이다.

---

## 4. 추가로 알아야 할 필수 개념

### ✅ 데이터 파이프라인 (Data Pipeline)
* 데이터가 생성되어 분석 결과가 나올 때까지의 전체 흐름.
* **과정:** 수집(Crawling) → 전처리(Cleaning) → 분석(Analysis/NER) → 시각화(Visualization) → 리포팅(Reporting)

### ✅ 프롬프트 엔지니어링 (Prompt Engineering)
AI에게 일을 더 잘 시키기 위한 기법들.
* **Persona:** "너는 00 전문가야"라고 역할 부여.
* **CoT (Chain of Thought):** "한 줄 한 줄 꼼꼼히 생각하고 답해"라고 추론 과정 유도.
* **Few-Shot:** 예시를 몇 개 보여줘서 따라 하게 만드는 기법.

### ✅ 토큰 (Token)
* AI가 글을 읽는 단위 (약 0.7 단어 = 1 토큰).
* **주의:** 토큰이 많을수록 API 비용이 증가하고, AI의 기억력(Context Window) 한계에 도달할 수 있음.

### ✅ ⚠️ API 보안 (Security)
* **절대 금지:** 코드 안에 `api_key = "sk-proj..."` 처럼 키를 직접 적어서 깃허브에 올리는 행위.
* **해결책:** `.env` 파일을 만들어서 환경 변수로 관리하거나, Colab의 `Secrets` 기능을 사용해야 함.

---

## 5. 🚀 실전 프로젝트: AI 주식 투자 분석 리포트 생성기

OpenAI API(GPT-4o)와 파이썬 라이브러리를 활용하여, 특정 종목의 '뉴스 심리'와 '주가 흐름'을 종합 분석하는 에이전트를 구현함.

### 🛠️ 사용된 핵심 기술 및 개념

#### 1) 감성 분석 (Sentiment Analysis)
* **개념:** 비정형 텍스트인 '뉴스 기사'를 분석하여 시장의 심리(긍정/부정/중립)를 수치화하는 NLP 기술.
* **구현:** GPT에게 페르소나를 부여하고, 기사의 어조를 분석해 5단계 등급(매우 좋음~매우 나쁨)으로 분류.

#### 2) 사용자 정의 NER (Custom NER)
* **개념:** 일반적인 고유명사 추출을 넘어, 사용자가 정의한 사전(대기업, 글로벌 트렌드 등)에 맞는 키워드만 타겟팅하여 추출.
* **구현:** System 프롬프트에 '대기업 정의', '트렌드 정의'를 가이드라인으로 제시하여 필터링 유도.

#### 3) 기술적 분석 시각화 (Technical Analysis)
* **개념:** 주가 데이터(시계열 데이터)의 흐름, 거래량, 등락률을 분석.
* **구현:** `FinanceDataReader` 라이브러리로 주가 정보를 수집하고, `Matplotlib`으로 시각화하여 데이터의 추세를 한눈에 파악.

#### 4) 데이터 합성 및 리포팅 (Data Synthesis)
* **개념:** 텍스트 분석 결과(정성적)와 주가 차트 데이터(정량적)를 결합하여 종합적인 인사이트를 도출.
* **구현:** 위에서 분석한 모든 결과를 프롬프트에 변수로 주입(Injection)하여, GPT가 전문 투자자 관점에서 최종 리포트를 작성하도록 함.

---

### 💻 간단한 구현 로직 (Workflow)

**Step 1. 데이터 수집 (Crawling)**
* 네이버 뉴스 API를 통해 특정 종목(예: 삼성전자)의 최신 기사를 수집.
* 정규표현식(`re`)을 사용해 HTML 태그 등 불필요한 노이즈 제거.

**Step 2. AI 뉴스 분석 (NLP)**
* 수집된 뉴스를 GPT에게 전송.
* **Prompt:** "너는 냉철한 투자자야. 이 뉴스의 감성을 판별하고, 핵심 키워드를 추출해." (Role-based Prompting)

**Step 3. 주가 데이터 확보 (Quantitative)**
* `FinanceDataReader`로 최근 3개월간의 종가, 거래량 데이터 확보.

**Step 4. 최종 리포트 생성 (Generation)**
* **Input:** [감성 비율 + 추출 키워드 + 주가 데이터]
* **Action:** GPT가 이 재료들을 버무려 '매수/매도 의견'이 포함된 줄글 리포트 작성.

---

### 🏥 헬스케어 도메인 확장 아이디어 
이 주식 분석 로직은 의료 분야에 그대로 적용 가능함.
* **뉴스 → 진료 차트:** 환자의 주관적 증상 호소(비정형 텍스트) 분석.
* **주가 데이터 → 바이탈 사인:** 혈압, 체온 등 시계열 데이터(정량적 데이터) 분석.
* **최종 리포트 → 진단 보조:** "환자의 호소와 바이탈 추이를 볼 때, 패혈증 초기 증상이 의심됩니다"라는 소견서 자동 생성.
